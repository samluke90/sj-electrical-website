---
phase: 02-design-system
plan: 02
type: execute
wave: 2
depends_on: ["02-01"]
files_modified:
  - index.html
  - services.html
  - quote.html
  - about.html
  - contact.html
  - css/styles.css
autonomous: false

must_haves:
  truths:
    - "Site loads dark without flash of light theme"
    - "Layout has generous whitespace, no visual clutter"
    - "Light mode toggle produces coherent light theme"
  artifacts:
    - path: "index.html"
      provides: "Blocking theme script in head"
      contains: "localStorage.getItem('theme')"
    - path: "css/styles.css"
      provides: "Updated spacing and light mode component styles"
      contains: "--space-3xl"
  key_links:
    - from: "HTML <head>"
      to: "document.documentElement"
      via: "blocking script"
      pattern: "setAttribute.*data-theme"
---

<objective>
Prevent flash of light theme (FOLT) and refine spacing/whitespace for minimalist aesthetic.

Purpose: Ensure smooth theme loading without visual flash, and increase whitespace for cleaner look.

Output: Blocking script in all HTML heads, updated section spacing, verified light mode styling.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/02-design-system/02-RESEARCH.md
@.planning/phases/02-design-system/02-01-SUMMARY.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add blocking theme script to prevent FOLT</name>
  <files>index.html, services.html, quote.html, about.html, contact.html</files>
  <action>
In each HTML file, add a blocking script immediately after the Google Fonts link and before the styles.css link:

```html
<!-- Theme initialization (blocking to prevent flash) -->
<script>
    if (localStorage.getItem('theme') === 'light') {
        document.documentElement.setAttribute('data-theme', 'light');
    }
</script>
```

The order in `<head>` should be:
1. Meta tags
2. Title
3. Google Fonts preconnect and link
4. **Theme blocking script** (NEW)
5. CSS stylesheet link

This script runs synchronously before CSS loads, so if user has light mode saved, it applies immediately - no flash of dark theme for light mode users.

Apply to all 5 HTML files:
- index.html
- services.html
- quote.html
- about.html
- contact.html
  </action>
  <verify>
Run: grep -l "localStorage.getItem('theme')" *.html | wc -l
Expected: 5 (all HTML files have blocking script)
  </verify>
  <done>All pages have blocking script to prevent theme flash</done>
</task>

<task type="auto">
  <name>Task 2: Update section spacing for minimalist whitespace</name>
  <files>css/styles.css</files>
  <action>
Update section padding to use the new spacing variables for more generous whitespace:

```css
/* Increase section padding for breathing room */
.services,
.why-us,
.testimonials,
.about-intro,
.contact-section,
.certifications,
.service-areas {
    padding: var(--space-3xl) 0; /* 64px instead of 80px - cleaner with new scale */
}

/* Photo quote CTA section - keep distinctive */
.photo-quote-cta {
    padding: var(--space-3xl) 0;
    background: var(--color-accent);
}

/* Update CTA section for orange background */
.photo-quote-cta .cta-content h2,
.photo-quote-cta .cta-content p,
.photo-quote-cta .cta-step p {
    color: var(--color-accent-text);
}

.photo-quote-cta .step-number {
    background: var(--color-bg-primary);
    color: var(--color-text-primary);
}

/* Generous margins between content blocks */
.section-header {
    margin-bottom: var(--space-2xl); /* 48px */
}

/* Card spacing */
.service-card,
.testimonial-card {
    padding: var(--space-xl); /* 32px */
}
```

Also ensure the services section has proper dark background:
```css
.services {
    padding: var(--space-3xl) 0;
    background: var(--color-bg-secondary);
}

.testimonials {
    padding: var(--space-3xl) 0;
    background: var(--color-bg-secondary);
}
```
  </action>
  <verify>
Open css/styles.css and confirm:
1. Section padding uses var(--space-3xl)
2. .photo-quote-cta uses var(--color-accent) background
3. Card padding uses var(--space-xl)
  </verify>
  <done>Sections have generous whitespace for minimalist aesthetic</done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>Complete dark-first design system with orange accent, Outfit typography, and minimalist spacing</what-built>
  <how-to-verify>
1. Open http://localhost (or file path) in browser
2. Verify site loads with BLACK background (no white flash)
3. Check text is WHITE and readable
4. Check CTAs/buttons are ORANGE with black text
5. Check typography looks geometric/modern (Outfit font)
6. Check sections have generous whitespace
7. Click light switch toggle - verify light mode works correctly:
   - Background becomes white
   - Text becomes dark
   - Orange accent adjusts appropriately
   - Switch visual state matches theme
8. Refresh page - theme preference should persist
9. Open in incognito - should default to dark mode
  </how-to-verify>
  <resume-signal>Type "approved" if design looks correct, or describe any issues</resume-signal>
</task>

</tasks>

<verification>
1. Page loads dark without any flash of light theme
2. Spacing feels generous and minimalist
3. Light mode toggle works bidirectionally
4. Theme persists across refresh and navigation
5. Both themes are visually coherent (not broken/inverted)
</verification>

<success_criteria>
- No flash of light theme when loading site (even with light mode saved)
- Sections have 64px vertical padding (generous whitespace)
- Photo quote CTA section has orange background with dark text
- Light mode produces coherent white background with dark text
- Light switch visual state matches current theme
</success_criteria>

<output>
After completion, create `.planning/phases/02-design-system/02-02-SUMMARY.md`
</output>
